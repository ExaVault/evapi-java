/*
 * ExaVault API
 * See our API reference documentation at https://www.exavault.com/developer/api-docs/
 *
 * OpenAPI spec version: 2.0
 * Contact: support@exavault.com
 *
 * NOTE: This class is auto generated by the swagger code generator program.
 * https://github.com/swagger-api/swagger-codegen.git
 * Do not edit the class manually.
 */

package com.exavault.client.api;

import com.exavault.client.ApiException;
import com.exavault.client.api.testdata.ApiTestData;
import com.exavault.client.model.AccountResponse;
import com.exavault.client.model.UpdateAccountRequestBody;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Nested;
import org.junit.jupiter.api.Test;

import static com.exavault.client.api.ApiTestAssertionUtil.validateAccountSettings;
import static com.exavault.client.api.testdata.ApiTestData.*;
import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.AssertionsKt.fail;

@DisplayName("Account API Tests")
public class AccountApiTest {

	private AccountApi api;

	@BeforeEach
	public void setup() {
		api = new AccountApi(ApiTestData.getApiClient());
	}


	@Nested
	@DisplayName("Get account settings, Method=GET, API=/account ")
	class GetAccount {
		@Test
		@DisplayName("Get account settings")
		public void getAccountTest() {
			try {
				final AccountResponse response = api.getAccount(EV_API_KEY, EV_ACCESS_TOKEN, MASTER_USER);
				validateAccountSettings(response);
			} catch (final ApiException e) {
				fail(FAILED_DUE_TO, e);
			}
		}

		@Test
		@DisplayName("Get account settings with invalid include")
		public void getAccountTestWithInvalidInclude() {
			try {
				final AccountResponse response = api.getAccount(EV_API_KEY, EV_ACCESS_TOKEN, INVALID);
				assertThat(response.getIncluded()).isEmpty();
			} catch (final ApiException e) {
				fail(FAILED_DUE_TO, e);
			}
		}
	}

	@Nested
	@DisplayName("Update account settings, Method=PATCH, API=/account ")
	class UpdateAccount {
		@Test
		@DisplayName("Update account settings")
		public void updateAccountTest() {
			try {
				final UpdateAccountRequestBody body = new UpdateAccountRequestBody();
				final AccountResponse response = api.updateAccount(EV_API_KEY, EV_ACCESS_TOKEN, body);
			} catch (final ApiException e) {
				fail(FAILED_DUE_TO, e);
			}
		}
	}
}
